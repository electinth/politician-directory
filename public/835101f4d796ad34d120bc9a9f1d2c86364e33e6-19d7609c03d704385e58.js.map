{"version":3,"sources":["webpack://politician-directory/./src/components/profile/inOfficeDate.js","webpack://politician-directory/./src/components/profile/officialWebsite.js","webpack://politician-directory/./src/components/stackedBarChart.js","webpack://politician-directory/./src/utils/index.js","webpack://politician-directory/./node_modules/lodash/compact.js"],"names":["profile","range","established_date","dissolved_date","formatDate","cssLinkBox","fontSize","fontFamily","fontWeight","textDecoration","border","marginRight","padding","color","items","map","key","official","href","css","className","length","labelContainerStyle","display","marginBottom","minHeight","lineHeight","labelCellStyle","whiteSpace","overflow","barContainerStyle","position","barCellStyle","borderRight","borderRightWidth","zIndex","tooltipTextStyle","top","backgroundColor","data","totalValue","p","value","reduce","acc","getPercentage","percentage","Math","floor","toFixed","each","name","style","width","background","bgHex","rgb","replace","m","r","g","b","substring","match","x","parseInt","dt","dayjs","format","formatNumber","num","toString","formatOrdinalNumber","ord","s","slice","sortThaiLocale","a","lastname","localeCompare","peopleSlug","fullname","ageFromBirthdate","birthdate","diff","motionCategorySlug","subCategory","arrangeData","template","options","valueKey","col","i","item","label","loadCategoryStats","education","occupation_group","input","gender","age","asset","mp_type","main_occupation_group","restMin","unknownIndex","unknown","splice","sort","temp","count_others","idx","push","combineCategory","filter","oc","includes","group","ageBin","String","today","year","y","node","birthdayToAgeHistogram","edges","bins","prev_lowerbound","lowerbound","assets","max","Number","POSITIVE_INFINITY","forEach","bin","assetHistogram","filterVote","peopleVotelog","o","votelog","joinPeopleVotelog","people","peopleVotelogs","votelogs","limit","votelogByPeople","allPeople","person","vote","id","approve","disprove","abstained","absent","filteredVoteResult","total_voter","module","exports","array","index","resIndex","result"],"mappings":"0NAkBA,EAbqB,SAAAA,GACnB,IAAMC,EAAQ,CAACD,EAAQE,iBAAkBF,EAAQG,gBAKjD,OAJIF,EAAM,KAAIA,EAAM,IAAKG,QAAWH,EAAM,KACtCA,EAAM,GAAIA,EAAM,IAAKG,QAAWH,EAAM,IACrCA,EAAM,GAAK,OAGd,iBACGA,EAAM,GADT,MACgBA,EAAM,K,qHCTpBI,EAAa,CACjBC,SAAU,SACVC,WAAY,kBACZC,WAAY,OACZC,eAAgB,OAChBC,OAAQ,4BACRC,YAAa,OACbC,QAAS,SACTC,MAAO,kBACP,UAAW,CACTJ,eAAgB,SAwBpB,IAnBwB,SAAAT,GACtB,IAAMc,EAAQ,IACZ,CAAC,UAAW,WAAY,WAAWC,KAAI,SAAAC,GACrC,IAAMC,EAAWjB,EAAQgB,GACzB,OAAKC,GAEH,QAAC,IAAD,CAAcD,IAAKA,EAAKE,KAAMD,EAAUE,KAAG,yBAAOd,GAAP,QACxC,IAAYW,IAHK,SAQ1B,OACE,eAAKI,UAAU,oBACZN,EAAMO,OAAS,EAAIP,EAAQ,iB,wDC/BlC,IAAMQ,EAAsB,CAC1BC,QAAS,OACTC,aAAc,OACdC,UAAW,SACXC,WAAY,UAGRC,EAAiB,CACrBrB,SAAU,SACVsB,WAAY,SACZC,SAAU,SACVtB,WAAY,mBAGRuB,EAAoB,CACxBP,QAAS,OACTb,OAAQ,8BACRe,UAAW,OACXC,WAAY,OACZK,SAAU,YAGNC,EAAe,CACnBC,YAAa,4BACb3B,SAAU,OACVsB,WAAY,SACZC,SAAU,SACV,eAAgB,CACdK,iBAAkB,GAEpB,wBAAyB,CACvBX,QAAS,QACTY,OAAQ,KAINC,EAAmB,CACvBb,QAAS,OACTjB,SAAU,SACVoB,WAAY,SACZW,IAAK,OACLN,SAAU,WACVrB,OAAQ,kBACR4B,gBAAiB,QACjB1B,QAAS,U,qRAmFX,IAhFwB,SAAC,GAAc,IAAZ2B,EAAW,EAAXA,KACnBC,EAAaD,EAChBxB,KAAI,SAAA0B,GAAC,OAAIA,EAAEC,SACXC,QAAO,SAACC,EAAKF,GAAN,OAAgBE,EAAMF,IAAO,GAEjCG,EAAgB,SAAAH,GACpB,IAAMI,EAAcJ,EAAQF,EAAc,IAC1C,OAAIO,KAAKC,MAAMF,KAAgBA,EACtBC,KAAKC,MAAMF,GAAc,IAE3BA,EAAWG,QAAQ,GAAK,KAkBjC,OACE,oBACE,eAAK9B,IAAKG,GACPiB,EAAKxB,KAAI,SAAAmC,GAAI,OACZ,eACElC,IAAKkC,EAAKC,KACVhC,IAAKQ,EACLyB,MAAO,CAAEC,MAAOR,EAAcK,EAAKR,UAEnC,gBAAMvB,IAAG,KACT,gBACEA,IAAG,GAOF+B,EAAKC,YAKd,eAAKhC,IAAKW,GACPS,EAAKxB,KAAI,SAAAmC,GAAI,OACZ,eACElC,IAAKkC,EAAKC,KACV/B,UAAU,UACVD,IAAKa,EACLoB,MAAO,CACLd,gBAAiBY,EAAKI,WACtBD,MAAOR,EAAcK,EAAKR,UAG5B,gBAAMvB,IAAG,KACT,gBACEA,IAAG,EACHiC,MAAO,CAAEvC,OApDA0C,EAoDoBL,EAAKI,WAnDtCE,EAAMD,EACTE,QACC,oCACA,SAACC,EAAGC,EAAGC,EAAGC,GAAV,MAAgB,IAAMF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,KAE3CC,UAAU,GACVC,MAAM,SACNhD,KAAI,SAAAiD,GAAC,OAAIC,SAASD,EAAG,OAEjB,GAAK,KAAQR,EAAI,GAAK,KAAQA,EAAI,GAAK,KAAQA,EAAI,IAAM,IAAM,GAClE,kBACA,qBA0COX,EAAcK,EAAKR,SAEtB,eAAKtB,UAAU,eAAeD,IAAKiB,IACjC,mBAAMc,EAAKC,OACX,mBAAMN,EAAcK,EAAKR,UA1DhB,IAAAa,EACbC,S,+sCCxDH,SAASpD,EAAW8D,GACzB,OAAOC,IAAMD,GAAIE,OAAO,cAOnB,SAASC,EAAaC,GAC3B,OAAOA,EAAIC,WAAWd,QAAQ,0BAA2B,OAOpD,SAASe,EAAoBF,GAClC,IAEIG,EAFEC,EAAIJ,EAAIC,WAGd,OAFUG,EAAEC,OAAO,IAGjB,IAAK,IACHF,EAAM,KACN,MACF,IAAK,IACHA,EAAM,KACN,MACF,IAAK,IACHA,EAAM,KACN,MACF,QACEA,EAAM,KAEV,OAAUC,EAAV,QAAmBD,EAAnB,SAQK,SAASG,EAAeC,EAAGhB,GAChC,OAAOgB,EAAE1B,OAASU,EAAEV,KAChB0B,EAAEC,SAASC,cAAclB,EAAEiB,SAAU,MACrCD,EAAE1B,KAAK4B,cAAclB,EAAEV,KAAM,MAO5B,SAAS6B,EAAWC,GACzB,OAAKA,EACC,WAAYA,EAASxB,QAAQ,KAAM,KADnB,GAQjB,SAASyB,EAAiBC,GAC/B,OAAOhB,MAAQiB,KAAKjB,IAAMgB,GAAY,QA0CjC,SAASE,EAAmBC,GACjC,OAAKA,EACC,GAAIA,EAAY7B,QAAQ,KAAM,KADX,GA4IpB,SAAS8B,EAAYhD,EAAMiD,EAAUC,GAK1C,YALwD,IAAdA,MAAU,IACpDA,EAAO,eACLC,SAAU,QACPD,GAEE,IACLD,EAASzE,KAAI,SAAC4E,EAAKC,GACjB,IAAMC,EAAO,IAAOtD,GAAQ,GAAI,CAACkD,EAAQC,SAAUC,EAAIxC,OACvD,OAAK0C,EACE,OAAP,UACKA,EADL,CAEE1C,KAAMwC,EAAIG,OAASH,EAAIxC,KACvBG,WAAYqC,EAAIrC,aAJA,SAUjB,SAASyC,EAAkBxD,GAChC,IAAIyD,EAaAC,EA5HsBC,EA8ItBC,EAUAC,EAaAC,EAaAC,EArDJ,GAbI,IAAM/D,EAAM,qBAEdyD,EAAYT,EADZS,GAAS,OAAO,IAAMzD,EAAM,oBACO,CACjC,CAAEY,KAAM,mBAAoBG,WAAY,qBACxC,CAAEH,KAAM,aAAcG,WAAY,qBAClC,CAAEH,KAAM,YAAaG,WAAY,qBACjC,CAAEH,KAAM,WAAYG,WAAY,qBAChC,CAAEH,KAAM,YAAaG,WAAY,qBACjC,CAAEH,KAAM,cAAeG,WAAY,8BAKnC,IAAMf,EAAM,0BAA2B,CACzC0D,GAAgB,OAAO,IAAM1D,EAAM,4BA9HX2D,EA+HOD,GA9H3BlF,KAAI,SAAAiD,GAIR,OAHKA,EAAEb,OACLa,EAAEb,KAAO,eAEJa,KA4HP,IAAMuC,GADNN,EA7JG,SAAyBC,EAAOM,QAAa,IAAbA,MAAU,GAE/C,IAAMC,EAAe,IAAYP,EAAO,CAAC,OAAQ,gBAC1CQ,GAAWD,GAAgB,EAAIP,EAAMS,OAAOF,EAAc,GAAK,IAAtE,GAGAP,EAAMU,MAAK,SAAC/B,EAAGhB,GAAJ,OAAUI,SAASJ,EAAEnB,OAASuB,SAASY,EAAEnC,UACpD,IAAImE,EAAO,GACPC,EAAe,EAkBnB,OAjBAZ,EAAMnF,KAAI,SAACiD,EAAG+C,GAMZ,OALIA,EAAMP,EAAU,EAClBM,GAAgB9C,EAAEtB,MAElBmE,EAAKG,KAAKhD,GAELA,KAEL8C,EAAe,GACjBD,EAAKG,KAAK,CAAEtE,MAAOoE,EAAc3D,KAAM,UAEzC+C,EAAQW,EAGJH,GACFR,EAAMc,KAAKN,GAENR,EAmIce,CADnBhB,EAxHKC,IA0H0CgB,QAC7C,SAAAC,GAAE,OAAK,CAAC,QAAS,eAAeC,SAASD,EAAGhE,SAE9C8C,EAAmBV,EAAYU,EAAD,kBACzBM,EAAsB5B,MAAM,EAAG,GAAG5D,KAAI,SAACsG,EAAOzB,GAAR,MAAe,CACtDzC,KAAMkE,EAAMlE,KACZG,WAAW,mBAAmB,EAAIsC,GAAxB,SAHgB,CAK5B,CAAEzC,KAAM,QAASG,WAAY,qBAC7B,CAAEH,KAAM,cAAeG,WAAY,8BAiDvC,OA5CI,IAAMf,EAAM,kBAEd4D,EAASZ,EADTY,GAAM,OAAO,IAAM5D,EAAM,iBACI,CAC3B,CAAEY,KAAM,MAAOG,WAAY,qBAC3B,CAAEH,KAAM,OAAQG,WAAY,qBAC5B,CAAEH,KAAM,cAAeG,WAAY,8BAKnC,IAAMf,EAAM,eAGd6D,EAAMb,EADNa,EA9GG,SAAgCjB,EAAWmC,QAAuB,IAAvBA,MAAS,CAAC,GAAI,GAAI,KAClE,IAAIlB,EAAM,GACVA,EAAIY,KAAK,CACP7D,KAAMoE,OAAO,MAAQA,OAAOD,EAAO,GAAK,IAAM,MAC9C5E,MAAO,IAET0D,EAAIY,KAAK,CACP7D,KAAMoE,OAAOD,EAAO,IAAM,IAAMC,OAAOD,EAAO,GAAK,GAAK,MACxD5E,MAAO,IAET0D,EAAIY,KAAK,CACP7D,KAAMoE,OAAOD,EAAO,IAAM,IAAMC,OAAOD,EAAO,GAAK,GAAK,MACxD5E,MAAO,IAET0D,EAAIY,KAAK,CAAE7D,KAAMoE,OAAOD,EAAO,IAAM,YAAa5E,MAAO,IACzD,IAAM8E,EAAQrD,MAAQsD,OAetB,OAdAtC,EAAUpE,KAAI,SAAAiD,GACZ,IAAM0D,EAAIvD,IAAMH,EAAE2D,KAAKxC,WAAWsC,OAC5B5C,EAAI2C,EAAQE,EAUlB,OATI7C,EAAIyC,EAAO,GACblB,EAAI,GAAG1D,QACEmC,EAAIyC,EAAO,GACpBlB,EAAI,GAAG1D,QACEmC,EAAIyC,EAAO,GACpBlB,EAAI,GAAG1D,QAEP0D,EAAI,GAAG1D,QAEFsB,KAEFoC,EAgFCwB,CADNxB,GAAG,OAAO,IAAM7D,EAAM,eAEC,CACrB,CAAEY,KAAM,WAAYG,WAAY,qBAChC,CAAEH,KAAM,WAAYG,WAAY,qBAChC,CAAEH,KAAM,WAAYG,WAAY,qBAChC,CAAEH,KAAM,cAAeG,WAAY,qBACnC,CAAEH,KAAM,cAAeG,WAAY,8BAKnC,IAAMf,EAAM,iBAGd8D,EAAQd,EADRc,EA9JG,SAAwBwB,EAAOC,QAAwB,IAAxBA,MAAO,CAAC,GAAI,IAAK,MACrD,IAEIC,EAFErB,EAAU,CAAEvD,KAAM,cAAeT,MAAO,GAC1CsF,GAAc,EAEZC,EAAM,kBACPH,EAAK/G,KAAI,SAAAmH,GAGV,OAFAH,EAAkBC,EAAa,EAC/BA,EAAaE,EACN,CACL/E,KAAS4E,EAAL,IAAwBG,EAAxB,WACJxF,MAAO,EACPwF,IAAW,IAANA,OAPC,CAUV,CACE/E,KAAS2E,EAAKA,EAAKzG,OAAS,GAAK,EAA7B,iBACJqB,MAAO,EACPwF,IAAKC,OAAOC,qBAehB,OAZAP,EAAMQ,SAAQ,YAAe,IAAZV,EAAW,EAAXA,KACf,GAA0B,iBAAfA,EAAKtB,OAAsBsB,EAAKtB,OAAS,EAClD,cAAkB4B,KAAlB,aAA0B,CAAC,IAAhBK,EAAe,QACxB,GAAIX,EAAKtB,OAASiC,EAAIJ,IAAK,CACzBI,EAAI5F,QACJ,YAIJgE,EAAQhE,WAGN,GAAN,eAAWuF,GAAX,CAAmBvB,IA8HT6B,CADRlC,GAAK,OAAO,IAAM9D,EAAM,iBAEG,CACzB,CAAEY,KAAM,eAAgBG,WAAY,qBACpC,CAAEH,KAAM,iBAAkBG,WAAY,qBACtC,CAAEH,KAAM,mBAAoBG,WAAY,qBACxC,CAAEH,KAAM,qBAAsBG,WAAY,qBAC1C,CAAEH,KAAM,cAAeG,WAAY,8BAKnC,IAAMf,EAAM,mBAEd+D,EAAUf,EADVe,GAAO,OAAO,IAAM/D,EAAM,kBACK,CAC7B,CAAEY,KAAM,eAAgBG,WAAY,qBACpC,CAAEH,KAAM,UAAWG,WAAY,wBAI5B,CACL6C,SACAE,QACAD,MACAJ,YACAC,mBACAK,WAIG,SAASkC,EAAWC,EAAezH,EAAK0B,GAC7C,OAAO,IAAS+F,GAAe,SAAAC,GAC7B,OACE,IACE,IAAOA,EAAEC,SAAW,IAAI,SAAAlG,GAAC,OAAIA,EAAEzB,MAAQA,KACvC,WACI0B,KAKL,SAASkG,EAAkBC,EAAQC,EAAgBC,EAAUC,QAAW,IAAXA,MAAQ,GAC1E,IAAMC,EAAkBH,EAAejB,MAAM9G,KAAI,qBAAG4G,QAC9CuB,EAAYL,EAAOhB,MAAM9G,KAAI,YAAuB,IAAdoI,EAAa,EAAnBxB,KAC9ByB,EAAO,IAAOH,EAAiB,CAAC,KAAME,EAAOE,KACnD,OAAO,OAAP,UACKF,EACAC,MAIP,OAAOL,EAASlB,MACb9G,KAAI,YAAwB,IAAf4H,EAAc,EAApBhB,KACA2B,EAAUd,EAAWU,EAAWP,EAAQU,GAAI,KAAKhI,OACjDkI,EAAWf,EAAWU,EAAWP,EAAQU,GAAI,KAAKhI,OAClDmI,EAAYhB,EAAWU,EAAWP,EAAQU,GAAI,KAAKhI,OACnDoI,EAASjB,EAAWU,EAAWP,EAAQU,GAAI,KAAKhI,OAChDqI,EAAqB,CACzBJ,UACAC,WACAC,YACAC,SACAE,YAAaL,EAAUC,EAAWC,EAAYC,GAEhD,OAAO,OAAP,UACKd,EACAe,MAGNxC,QAAO,qBAAGyC,YAAgC,KAC1ChF,MAAM,EAAGqE,K,iBC9WdY,EAAOC,QAfP,SAAiBC,GAMf,IALA,IAAIC,GAAS,EACT1I,EAAkB,MAATyI,EAAgB,EAAIA,EAAMzI,OACnC2I,EAAW,EACXC,EAAS,KAEJF,EAAQ1I,GAAQ,CACvB,IAAIqB,EAAQoH,EAAMC,GACdrH,IACFuH,EAAOD,KAActH,GAGzB,OAAOuH","file":"835101f4d796ad34d120bc9a9f1d2c86364e33e6-19d7609c03d704385e58.js","sourcesContent":["import React from \"react\"\n\nimport { formatDate } from \"../../utils\"\n\n// component to show active date range\nconst InOfficeDate = profile => {\n  const range = [profile.established_date, profile.dissolved_date]\n  if (range[0]) range[0] = formatDate(range[0])\n  if (range[1]) range[1] = formatDate(range[1])\n  else range[1] = \"Now\"\n\n  return (\n    <p>\n      {range[0]} - {range[1]}\n    </p>\n  )\n}\n\nexport default InOfficeDate\n","import React from \"react\"\nimport _ from \"lodash\"\nimport ExternalLink from \"../externalLink\"\n\nconst cssLinkBox = {\n  fontSize: \"1.7rem\",\n  fontFamily: \"var(--ff-title)\",\n  fontWeight: \"bold\",\n  textDecoration: \"none\",\n  border: \"1px solid var(--cl-black)\",\n  marginRight: \"1rem\",\n  padding: \"0 1rem\",\n  color: \"var(--cl-black)\",\n  \"&:hover\": {\n    textDecoration: \"none\",\n  },\n}\n\n// component to show official websites\nconst OfficialWebsite = profile => {\n  const items = _.compact(\n    [\"website\", \"facebook\", \"twitter\"].map(key => {\n      const official = profile[key]\n      if (!official) return null\n      return (\n        <ExternalLink key={key} href={official} css={{ ...cssLinkBox }}>\n          {_.startCase(key)}\n        </ExternalLink>\n      )\n    })\n  )\n  return (\n    <div className=\"official-website\">\n      {items.length > 0 ? items : \"ไม่มีข้อมูล\"}\n    </div>\n  )\n}\n\nexport default OfficialWebsite\n","import React from \"react\"\n\nconst labelContainerStyle = {\n  display: \"flex\",\n  marginBottom: \"0rem\",\n  minHeight: \"2.4rem\",\n  lineHeight: \"2.4rem\",\n}\n\nconst labelCellStyle = {\n  fontSize: \"1.6rem\",\n  whiteSpace: \"nowrap\",\n  overflow: \"hidden\",\n  fontFamily: \"var(--ff-title)\",\n}\n\nconst barContainerStyle = {\n  display: \"flex\",\n  border: \"1.5px solid var(--cl-black)\",\n  minHeight: \"30px\",\n  lineHeight: \"30px\",\n  position: \"relative\",\n}\n\nconst barCellStyle = {\n  borderRight: \"1px solid var(--cl-black)\",\n  fontSize: \"1rem\",\n  whiteSpace: \"nowrap\",\n  overflow: \"hidden\",\n  \"&:last-child\": {\n    borderRightWidth: 0,\n  },\n  \"&:hover .tooltip-text\": {\n    display: \"block\",\n    zIndex: 10,\n  },\n}\n\nconst tooltipTextStyle = {\n  display: \"none\",\n  fontSize: \"1.2rem\",\n  lineHeight: \"1.8rem\",\n  top: \"32px\",\n  position: \"absolute\",\n  border: \"1px solid black\",\n  backgroundColor: \"white\",\n  padding: \"0.5rem\",\n}\n\nconst StackedBarChart = ({ data }) => {\n  const totalValue = data\n    .map(p => p.value)\n    .reduce((acc, value) => acc + value, 0)\n\n  const getPercentage = value => {\n    const percentage = (value / totalValue) * 100\n    if (Math.floor(percentage) === percentage) {\n      return Math.floor(percentage) + \"%\"\n    }\n    return percentage.toFixed(2) + \"%\"\n  }\n\n  const getTextColor = bgHex => {\n    const rgb = bgHex\n      .replace(\n        /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,\n        (m, r, g, b) => \"#\" + r + r + g + g + b + b\n      )\n      .substring(1)\n      .match(/.{2}/g)\n      .map(x => parseInt(x, 16))\n\n    return 1 - (0.299 * rgb[0] + 0.587 * rgb[1] + 0.114 * rgb[2]) / 255 < 0.5\n      ? \"var(--cl-black)\"\n      : \"var(--cl-white)\"\n  }\n\n  return (\n    <div>\n      <div css={labelContainerStyle}>\n        {data.map(each => (\n          <div\n            key={each.name}\n            css={labelCellStyle}\n            style={{ width: getPercentage(each.value) }}\n          >\n            <span css={{ float: \"left\", height: \"100%\", width: \"1px\" }}></span>\n            <span\n              css={{\n                float: \"left\",\n                fontFamily: \"var(--ff-text)\",\n                fontSize: \"1.2rem\",\n                fontWeight: \"bold\",\n              }}\n            >\n              {each.name}\n            </span>\n          </div>\n        ))}\n      </div>\n      <div css={barContainerStyle}>\n        {data.map(each => (\n          <div\n            key={each.name}\n            className=\"tooltip\"\n            css={barCellStyle}\n            style={{\n              backgroundColor: each.background,\n              width: getPercentage(each.value),\n            }}\n          >\n            <span css={{ float: \"left\", height: \"100%\", width: \"1px\" }}></span>\n            <span\n              css={{ float: \"left\", marginLeft: \"0.25rem\" }}\n              style={{ color: getTextColor(each.background) }}\n            >\n              {getPercentage(each.value)}\n            </span>\n            <div className=\"tooltip-text\" css={tooltipTextStyle}>\n              <div>{each.name}</div>\n              <div>{getPercentage(each.value)}</div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default StackedBarChart\n","import dayjs from \"dayjs\"\nimport _ from \"lodash\"\n\n/**\n * Format date\n * @param {Date,String,dayjs} date\n */\nexport function formatDate(dt) {\n  return dayjs(dt).format(\"DD.MM.YYYY\")\n}\n\n/**\n * Format number with thousands\n * @param {Number} num\n */\nexport function formatNumber(num) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")\n}\n\n/**\n * Format ordinal number e.g. 2 => 2nd, 3 => 3rd\n * @param {Number} num\n */\nexport function formatOrdinalNumber(num) {\n  const s = num.toString()\n  const n = s.slice(-1)\n  let ord\n  switch (n) {\n    case \"1\":\n      ord = \"st\"\n      break\n    case \"2\":\n      ord = \"nd\"\n      break\n    case \"3\":\n      ord = \"rd\"\n      break\n    default:\n      ord = \"th\"\n  }\n  return `${s}<sup>${ord}</sup>`\n}\n\n/**\n * Comparator function to use in Array.sort(sortThaiLocale)\n * @param {People} a Person object\n * @param {People} b Person object\n */\nexport function sortThaiLocale(a, b) {\n  return a.name === b.name\n    ? a.lastname.localeCompare(b.lastname, \"th\")\n    : a.name.localeCompare(b.name, \"th\")\n}\n\n/**\n * Create people profile slug\n * @param {String} fullname\n */\nexport function peopleSlug(fullname) {\n  if (!fullname) return \"\"\n  return `/people/${fullname.replace(/ /g, \"-\")}`\n}\n\n/**\n * Calcaulate person's age from his/her birthdaty\n * @param {String, Date} birthdate Date format accepted by dayjs\n */\nexport function ageFromBirthdate(birthdate) {\n  return dayjs().diff(dayjs(birthdate), \"year\")\n}\n\n/**\n * For fun. Change arabic number to Thai reading\n * @param {Number} number\n */\nexport function getThaiName(number) {\n  const mapping = d => {\n    switch (d) {\n      case \"0\":\n        return \"ศูนย์\"\n      case \"1\":\n        return \"หนึ่ง\"\n      case \"2\":\n        return \"สอง\"\n      case \"3\":\n        return \"สาม\"\n      case \"4\":\n        return \"สี่\"\n      case \"5\":\n        return \"ห้า\"\n      case \"6\":\n        return \"หก\"\n      case \"7\":\n        return \"เจ็ด\"\n      case \"8\":\n        return \"แปด\"\n      case \"9\":\n        return \"เก้า\"\n      default:\n        return \"ว่าง\"\n    }\n  }\n  const digits = String(number)\n  return _.map(digits, d => mapping(d)).join(\"\")\n}\n\n/**\n * Create motion category slug\n * @param {String} subCategory\n */\nexport function motionCategorySlug(subCategory) {\n  if (!subCategory) return \"\"\n  return `${subCategory.replace(/ /g, \"-\")}`\n}\n\nexport function float2Grey(x) {\n  x = 1 - x\n  x = parseInt(x * 15)\n  x = x.toString(16)\n  return \"#\" + x + x + x\n}\n\nexport function calculateBackground(input) {\n  let count = input.length - 1\n  input.forEach((x, idx) => {\n    x.background = float2Grey(idx / count)\n  })\n  return input\n}\n\nexport function combineCategory(input, restMin = 3) {\n  // first, split 'unknown' and other values\n  const unknownIndex = _.findIndex(input, [\"name\", \"ไม่พบข้อมูล\"])\n  const [unknown] = unknownIndex >= 0 ? input.splice(unknownIndex, 1) : []\n\n  // sort the rest by m\n  input.sort((a, b) => parseInt(b.value) - parseInt(a.value))\n  let temp = []\n  let count_others = 0\n  input.map((x, idx) => {\n    if (idx > restMin - 1) {\n      count_others += x.value\n    } else {\n      temp.push(x)\n    }\n    return x\n  })\n  if (count_others > 0) {\n    temp.push({ value: count_others, name: \"อื่นๆ\" })\n  }\n  input = temp\n\n  // lastly, put 'unknown' back as the last item\n  if (unknown) {\n    input.push(unknown)\n  }\n  return input\n}\n\nexport function padCategory(input) {\n  input.map(x => {\n    if (!x.name) {\n      x.name = \"ไม่พบข้อมูล\"\n    }\n    return x\n  })\n  return input\n}\n\nexport function assetHistogram(edges, bins = [10, 100, 1000]) {\n  const unknown = { name: \"ไม่พบข้อมูล\", value: 0 }\n  let lowerbound = -1\n  let prev_lowerbound\n  const assets = [\n    ...bins.map(max => {\n      prev_lowerbound = lowerbound + 1\n      lowerbound = max\n      return {\n        name: `${prev_lowerbound}-${max} ล้านบาท`,\n        value: 0,\n        max: max * 1e6,\n      }\n    }),\n    {\n      name: `${bins[bins.length - 1] + 1} ล้านบาทขึ้นไป`,\n      value: 0,\n      max: Number.POSITIVE_INFINITY,\n    },\n  ]\n  edges.forEach(({ node }) => {\n    if (typeof node.asset === \"number\" && node.asset >= 0) {\n      for (const bin of assets) {\n        if (node.asset <= bin.max) {\n          bin.value++\n          break\n        }\n      }\n    } else {\n      unknown.value++\n    }\n  })\n  return [...assets, unknown]\n}\n\nexport function birthdayToAgeHistogram(birthdate, ageBin = [39, 55, 74]) {\n  let age = []\n  age.push({\n    name: String(\"25-\" + String(ageBin[0] - 1)) + \" ปี\",\n    value: 0,\n  })\n  age.push({\n    name: String(ageBin[0]) + \"-\" + String(ageBin[1] - 1) + \" ปี\",\n    value: 0,\n  })\n  age.push({\n    name: String(ageBin[1]) + \"-\" + String(ageBin[2] - 1) + \" ปี\",\n    value: 0,\n  })\n  age.push({ name: String(ageBin[2]) + \" ปีขึ้นไป\", value: 0 })\n  const today = dayjs().year()\n  birthdate.map(x => {\n    const y = dayjs(x.node.birthdate).year()\n    const a = today - y\n    if (a < ageBin[0]) {\n      age[0].value++\n    } else if (a < ageBin[1]) {\n      age[1].value++\n    } else if (a < ageBin[2]) {\n      age[2].value++\n    } else {\n      age[3].value++\n    }\n    return x\n  })\n  return age\n}\n\n/**\n * Template is an ordered list of columns to sort and set color\n * template = [\n *   { name: 'Male', label: 'เพศชาย', background: 'blue' },\n *   { name: 'Female', label: 'เพศหญฺิง', background: 'red' },\n * ]\n *\n * Where\n * - `name` is a group value to match\n * - `label`, if specified, use this value as a label name instead of value of `name`\n * - `background` set color for this stack\n * @param {*} data\n * @param {Array} template\n */\nexport function arrangeData(data, template, options = {}) {\n  options = {\n    valueKey: \"name\",\n    ...options,\n  }\n  return _.compact(\n    template.map((col, i) => {\n      const item = _.find(data || [], [options.valueKey, col.name])\n      if (!item) return null\n      return {\n        ...item,\n        name: col.label || col.name,\n        background: col.background,\n      }\n    })\n  )\n}\n\nexport function loadCategoryStats(data) {\n  let education\n  if (_.get(data, \"education.group\")) {\n    education = [..._.get(data, \"education.group\")]\n    education = arrangeData(education, [\n      { name: \"ต่ำกว่าปริญญาตรี\", background: \"var(--cl-theme-1)\" },\n      { name: \"สถาบันทหาร\", background: \"var(--cl-theme-2)\" },\n      { name: \"ปริญญาตรี\", background: \"var(--cl-theme-3)\" },\n      { name: \"ปริญญาโท\", background: \"var(--cl-theme-4)\" },\n      { name: \"ปริญญาเอก\", background: \"var(--cl-theme-5)\" },\n      { name: \"ไม่พบข้อมูล\", background: \"var(--cl-theme-unknown)\" },\n    ])\n  }\n\n  let occupation_group\n  if (_.get(data, \"occupation_group.group\")) {\n    occupation_group = [..._.get(data, \"occupation_group.group\")]\n    occupation_group = padCategory(occupation_group)\n    occupation_group = combineCategory(occupation_group)\n    const main_occupation_group = occupation_group.filter(\n      oc => ![\"อื่นๆ\", \"ไม่พบข้อมูล\"].includes(oc.name)\n    )\n    occupation_group = arrangeData(occupation_group, [\n      ...main_occupation_group.slice(0, 3).map((group, i) => ({\n        name: group.name,\n        background: `var(--cl-theme-${2 + i})`,\n      })),\n      { name: \"อื่นๆ\", background: \"var(--cl-theme-5)\" },\n      { name: \"ไม่พบข้อมูล\", background: \"var(--cl-theme-unknown)\" },\n    ])\n  }\n\n  let gender\n  if (_.get(data, \"gender.group\")) {\n    gender = [..._.get(data, \"gender.group\")]\n    gender = arrangeData(gender, [\n      { name: \"ชาย\", background: \"var(--cl-theme-2)\" },\n      { name: \"หญิง\", background: \"var(--cl-theme-5)\" },\n      { name: \"ไม่พบข้อมูล\", background: \"var(--cl-theme-unknown)\" },\n    ])\n  }\n\n  let age\n  if (_.get(data, \"age.edges\")) {\n    age = [..._.get(data, \"age.edges\")]\n    age = birthdayToAgeHistogram(age)\n    age = arrangeData(age, [\n      { name: \"25-38 ปี\", background: \"var(--cl-theme-2)\" },\n      { name: \"39-54 ปี\", background: \"var(--cl-theme-3)\" },\n      { name: \"55-73 ปี\", background: \"var(--cl-theme-4)\" },\n      { name: \"74 ปีขึ้นไป\", background: \"var(--cl-theme-5)\" },\n      { name: \"ไม่พบข้อมูล\", background: \"var(--cl-theme-unknown)\" },\n    ])\n  }\n\n  let asset\n  if (_.get(data, \"asset.edges\")) {\n    asset = [..._.get(data, \"asset.edges\")]\n    asset = assetHistogram(asset)\n    asset = arrangeData(asset, [\n      { name: \"0-10 ล้านบาท\", background: \"var(--cl-theme-2)\" },\n      { name: \"11-100 ล้านบาท\", background: \"var(--cl-theme-3)\" },\n      { name: \"101-1000 ล้านบาท\", background: \"var(--cl-theme-4)\" },\n      { name: \"1001 ล้านบาทขึ้นไป\", background: \"var(--cl-theme-5)\" },\n      { name: \"ไม่พบข้อมูล\", background: \"var(--cl-theme-unknown)\" },\n    ])\n  }\n\n  let mp_type\n  if (_.get(data, \"mp_type.group\")) {\n    mp_type = [..._.get(data, \"mp_type.group\")]\n    mp_type = arrangeData(mp_type, [\n      { name: \"บัญชีรายชื่อ\", background: \"var(--cl-theme-2)\" },\n      { name: \"แบ่งเขต\", background: \"var(--cl-theme-5)\" },\n    ])\n  }\n\n  return {\n    gender,\n    asset,\n    age,\n    education,\n    occupation_group,\n    mp_type,\n  }\n}\n\nexport function filterVote(peopleVotelog, key, value) {\n  return _.filter(peopleVotelog, o => {\n    return (\n      _.get(\n        _.find(o.votelog || [], p => p.key === key),\n        \"value\"\n      ) === value\n    )\n  })\n}\n\nexport function joinPeopleVotelog(people, peopleVotelogs, votelogs, limit = 6) {\n  const votelogByPeople = peopleVotelogs.edges.map(({ node }) => node)\n  const allPeople = people.edges.map(({ node: person }) => {\n    const vote = _.find(votelogByPeople, [\"id\", person.id])\n    return {\n      ...person,\n      ...vote,\n    }\n  })\n\n  return votelogs.edges\n    .map(({ node: votelog }) => {\n      const approve = filterVote(allPeople, votelog.id, \"1\").length\n      const disprove = filterVote(allPeople, votelog.id, \"2\").length\n      const abstained = filterVote(allPeople, votelog.id, \"3\").length\n      const absent = filterVote(allPeople, votelog.id, \"4\").length\n      const filteredVoteResult = {\n        approve,\n        disprove,\n        abstained,\n        absent,\n        total_voter: approve + disprove + abstained + absent,\n      }\n      return {\n        ...votelog,\n        ...filteredVoteResult,\n      }\n    })\n    .filter(({ total_voter }) => total_voter > 0)\n    .slice(0, limit)\n}\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n"],"sourceRoot":""}